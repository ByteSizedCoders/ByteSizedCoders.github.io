<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registration Page</title>
    <link rel="stylesheet" type="text/css" href="navbar.css" />
    <link rel="stylesheet" type="text/css" href="regNewKid.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
  </head>
  <body>
    <nav class="navbar">
      <div>
        <a href="index.html" accesskey="h"
          ><img src="images/logo (2).png" alt="logo"
        /></a>
      </div>
      <ul class="navlist" id="nav">
        <li class="list-item">
          <a href="courses.html" accesskey="c">Courses</a>
        </li>
        <li>
          <a href="Tutorss.html" accesskey="t">Tutors</a>
        </li>
        <li>
          <a href="admininstrator.html" accesskey="a">Administrator</a>
        </li>
        <li>
          <a href="parent.html" accesskey="p">Parent</a>
        </li>
        <li>
          <a href="AboutUs.html" accesskey="b">About us</a>
        </li>
      </ul>
      <div class="menu" id="button">
        <div class="menu-line"></div>
        <div class="menu-line"></div>
        <div class="menu-line"></div>
      </div>
    </nav>
    <!-- breadcrumbs  -->
    <div class="breadcrumbs">
      <ul>
        <li>
          <a href="index.html">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              class="w-6 h-6"
            >
              <path
                d="M11.47 3.84a.75.75 0 011.06 0l8.69 8.69a.75.75 0 101.06-1.06l-8.689-8.69a2.25 2.25 0 00-3.182 0l-8.69 8.69a.75.75 0 001.061 1.06l8.69-8.69z"
              />
              <path
                d="M12 5.432l8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 01-.75-.75v-4.5a.75.75 0 00-.75-.75h-3a.75.75 0 00-.75.75V21a.75.75 0 01-.75.75H5.625a1.875 1.875 0 01-1.875-1.875v-6.198a2.29 2.29 0 00.091-.086L12 5.43z"
              />
            </svg>
          </a>
        </li>

        <li>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="w-6 h-6"
          >
            <path
              fill-rule="evenodd"
              d="M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z"
              clip-rule="evenodd"
            />
          </svg>
        </li>

        <li><a href="parent.html">Parent</a></li>

        <li>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="w-6 h-6"
          >
            <path
              fill-rule="evenodd"
              d="M16.28 11.47a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 01-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 011.06-1.06l7.5 7.5z"
              clip-rule="evenodd"
            />
          </svg>
        </li>

        <li>Register a new kid</li>
      </ul>
    </div>
    <!-- breadcrumbs  -->

    <div class="container">
      <br >
      <form id="registrationForm">
        <fieldset>
          <legend><strong>Parent's Information</strong></legend>
          <br >
          <label>Parent's Name:<br ></label>
          <input
            type="text"
            id="parentName"
            name="parentName"
            
          ><br ><br >

          <label>Relationship with child:<br ></label>
          <input
            type="text"
            id="RelationshipWChild"
            name="RelationshipWChild"
            

          ><br ><br >

          <label>Parent's Email:<br ></label>
          <input
            type="email"
            id="parentEmail"
            name="parentEmail"
            

          ><br ><br >

          <label>Parent's Phone:<br ></label>
          <input
            type="text"
            id="parentPhone"
            name="parentPhone"
          

          ><br ><br >
        </fieldset>
        <br >
        <br >
        <fieldset>
          <br >
          <legend><strong>Kid's Information</strong></legend>
          <label>Kid's Name:<br > </label>
          <input 
          type="text" 
          id="kidName" 
          name="kidName" 
          

          ><br ><br >

          <label>Kid's Photo:<br ></label>
          <input
            type="file"
            id="kidPhoto"
            name="kidPhoto"
            

          ><br ><br >

          <label>Kid's Gender:</label>
          <input type="radio" name="Gender" value="Male" /> Male
          <input type="radio" name="Gender" value="Female" /> Female
          
          <br ><br >

          <label>Kid's Date of Birth:</label>
          <input type="date" id="kidDOB" name="kidDOB" 
          ><br ><br >
          
        </fieldset>
        <br >
        <input type="submit" value="Submit" />
        
      </form>
      <div id="childInformation" style="display: none;">
        <h2>Child Information:</h2>
        <p><strong>Name:</strong> <span id="displayKidName"></span></p>
        <p><strong>Photo Path:</strong> <span id="displayKidPhoto"></span></p>
        <p><strong>Gender:</strong> <span id="displayKidGender"></span></p>
        <p><strong>Date of Birth:</strong> <span id="displayKidDOB"></span></p>
      </div>
    </div>
    
    

    <footer class="footer">
      <div class="footercontainer">
        <div class="footerrow">
          <div class="footer-col">
            <h4>Location</h4>
            <ul>
              <li>saudi arabia, Riyadh</li>
              <li>saudi arabia, jeddah</li>
            </ul>
          </div>
          <div class="footer-col">
            <h4>follow us</h4>
            <div class="social">
              <i class="fa-brands fa-twitter" style="color: #ffffff"></i>
              <i class="fa-brands fa-instagram" style="color: #ffffff"></i>
              <i class="fa-brands fa-facebook" style="color: #ffffff"></i>
              <i class="fa-brands fa-linkedin" style="color: #ffffff"></i>
            </div>
            <p id="copyRight">Â©2023 Byte-sized coders</p>
          </div>
          <div class="footer-col">
            <h4>get help</h4>
            <ul>
              <li>+9660552778344</li>
              <li>Byte-sized-coders@gmail.com</li>
            </ul>
          </div>
        </div>
      </div>
    </footer>
    
    <script>
    
/////////////////////////////////////////////////////////////a

          let isValid = true;

          document.getElementById("registrationForm").addEventListener("submit", function (event) {
   // ... (validation logic)

          event.preventDefault(); // Prevent the default form submission behavior
    
          // Validate form inputs
          const form = document.getElementById("registrationForm");
          const formElements = form.elements;
    
          let isValid = true;

          for (let i = 0; i < formElements.length; i++) {
            const element = formElements[i];
    
            if (element.type !== "submit") {
              // Additional checks for specific fields
              if (element.name === "parentName" || element.name === "kidName") {
                if (/^\d/.test(element.value)) {
                  alert(`Invalid ${element.name}. It can't start with numbers.`);
                  isValid = false;
                  break;
                }
                if (!element.value) {
                  alert(`Please fill in the ${element.name} field.`);
                  isValid = false;
                  break; // Stop validation if an empty field is found
                }
              }
    
              if (element.name === "parentPhone") {
                if (!element.value) {
                  alert(`Please fill in the parent phone number field.`);
                  isValid = false;
                  break; // Stop validation if an empty field is found
                }
                if (!/^\d{10}$/.test(element.value)) {
                  alert("Invalid phone number. Please enter a 10-digit number.");
                  isValid = false;
                  break;
                }
              
              }
    
              if (element.name === "kidDOB") {
                const currentDate = new Date();
                const inputDate = new Date(element.value);
    
                if (!element.value) {
                  alert(`Please fill in the kid's date of birth field.`);
                  isValid = false;
                  break; // Stop validation if an empty field is found
                }
                if (inputDate.getFullYear() > 2017) {
                  alert("Children younger than 6 years old are not accepted.");
                  isValid = false;
                  break;
                }
                
              }
    
              if (element.name === "RelationshipWChild") {
                if (/^\d/.test(element.value)) {
                  alert(`Invalid ${element.name}. It can't start with numbers.`);
                  isValid = false;
                  break;
                }
                if (!element.value) {
                  alert(`Please fill in the relationship With Child field.`);
                  isValid = false;
                  break; // Stop validation if an empty field is found
                }
              }

              if (element.name === "parentEmail") {
             
                if (!element.value) {
                  alert(`Please fill in the Email field.`);
                  isValid = false;
                  break; // Stop validation if an empty field is found
                }
              }

              if (element.name === "kidPhoto") {
             
             if (!element.value) {
               alert(`Please fill in the kid Photo field.`);
               isValid = false;
               break; // Stop validation if an empty field is found
             }
           }

           if (element.name === "Gender" && !document.querySelector('input[name="Gender"]:checked')) {
          alert("Please select a gender.");
          isValid = false;
          break;
        }

              
            }
          }
    
          if (isValid) {
            
            const kidName = form.querySelector('[name="kidName"]').value;
            const kidPhotoInput = form.querySelector('[name="kidPhoto"]');
            const kidGender = form.querySelector('[name="Gender"]:checked').value;
            const kidDOB = form.querySelector('[name="kidDOB"]').value;
            const parentEmail = form.querySelector('[name="parentEmail"]').value;
            const parentPhone = form.querySelector('[name="parentPhone"]').value;

    
            // Read the image file
            const kidPhotoFile = kidPhotoInput.files[0];
            const reader = new FileReader();
    
            reader.onload = function (e) {
              const originalImage = new Image();
              originalImage.src = e.target.result;
    
              originalImage.onload = function () {
                // Calculate the aspect ratio of the original image
                const aspectRatio = originalImage.width / originalImage.height;
    
                // Set the maximum width and height
                const maxWidth = 150;
                const maxHeight = 110;
    
                // Calculate the new width and height to fit into the box
                let newWidth = originalImage.width;
                let newHeight = originalImage.height;
    
                if (newWidth > maxWidth) {
                  newWidth = maxWidth;
                  newHeight = newWidth / aspectRatio;
                }
    
                if (newHeight > maxHeight) {
                  newHeight = maxHeight;
                  newWidth = newHeight * aspectRatio;
                }
    
                // Create a canvas to draw the resized image
                const canvas = document.createElement("canvas");
                canvas.width = newWidth;
                canvas.height = newHeight;
                const ctx = canvas.getContext("2d");
                ctx.drawImage(originalImage, 0, 0, newWidth, newHeight);
    
                // Get the resized image as a data URL with increased quality
                const resizedDataURL = canvas.toDataURL("image/jpeg", 0.9);
    
                // Store child information in localStorage
                localStorage.setItem("kidName", kidName);
               


    
                // Open a new window to display the child information
                const printWindow = window.open("", "_blank");
    
                // Populate the new window with child information
                printWindow.document.write(
                  `<html><head><title>Child Information</title></head><body>`
                );
                printWindow.document.write(`<h2>Child Information:</h2>`);
                printWindow.document.write(
                  `<p><img src="${resizedDataURL}" alt="${kidName}'s Photo" width="${newWidth}" height="${newHeight}"></p>`
                );
                printWindow.document.write(`<p><strong>Name:</strong> ${kidName}</p>`);
                printWindow.document.write(`<p><strong>Gender:</strong> ${kidGender}</p>`);
                printWindow.document.write(`<p><strong>Email:</strong> ${parentEmail}</p>`);
                printWindow.document.write(`<p><strong>phone:</strong> ${parentPhone}</p>`);


                printWindow.document.write(`</body></html>`);
    
                // Close the document
                printWindow.document.close();
              };
            };
    
            // Read the file as a data URL
            reader.readAsDataURL(kidPhotoFile);

          }
        });
    
      ///////////////////////////////////#5
      //const existingChildren = JSON.parse(localStorage.getItem("parentChildren")) || [];
      document.getElementById("registrationForm").addEventListener("submit", function (event) {
        event.preventDefault();

        // Get parent and kid information
        const parentName = document.getElementById("parentName").value;
        const relationshipWChild = document.getElementById("RelationshipWChild").value;
        const parentEmail = document.getElementById("parentEmail").value;
        const parentPhone = document.getElementById("parentPhone").value;
        const kidName = document.getElementById("kidName").value;
        const kidPhoto = document.getElementById("kidPhoto").value; // Add logic to handle file upload
        const kidGender = document.querySelector('input[name="Gender"]:checked').value;
        const kidDOB = document.getElementById("kidDOB").value;

        // Create an object to store the information
        const kidInformation = {
          parentName,
          relationshipWChild,
          parentEmail,
          parentPhone,
          kidName,
          kidPhoto, // Adjust this based on your file upload logic
          kidGender,
          kidDOB,
        };
        if(isValid){
 // Retrieve existing children from local storage
 const existingChildren = JSON.parse(localStorage.getItem("parentChildren")) || [];

// Add the new kid information
existingChildren.push(kidInformation);

// Save the updated children to local storage
localStorage.setItem("parentChildren", JSON.stringify(existingChildren));

// Optionally, you can redirect to a confirmation page or perform other actions
alert("Kid registration successful!");
// Clear the form
document.getElementById("registrationForm").reset();}

      });
    </script>
  </body>
</html>
